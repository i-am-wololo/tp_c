#include <stdio.h>
#include <stdlib.h>

/*
Exercice 1.1 : Ecrire la définition d’un type permettant de représenter une personne. 
               Le type sera nommé Personne et devra contenir : 
               un nom (char*), un prénom (char*) et un âge (unsigned short).
*/
typedef struct {
    char* nom;
    char* prenom;
    unsigned short age;
} Personne;

/*
Exercice 1.2 : Ecrire la définition du type Adresse qui représente une adresse postale. 
               Une adresse postale est composée:
               d’un numéro de rue (unsigned int), d’un nom de voie (char*), d’un code postal (unsigned int) et d’une ville (char*).
*/
typedef struct {
  unsigned short numero;
  char* voie;
  unsigned int code;
  char* ville;
  
} Adresse;

/*
Exercice 1.3 : Ecrire une fonction Personne* lirePersonne(void) 
               qui retourne un pointeur vers une Personne créée à partir des données demandées à l’utilisateur.
*/
Personne* lirePersonne(void) {
    Personne* p = (Personne*)malloc(sizeof(Personne));
    p->nom = (char*) malloc(255*sizeof(char));
    p->prenom = (char*) malloc(255*sizeof(char));
    
    printf("Saisir une personne (nom prenom age): ");
    
    scanf("%s %s %hd", p->nom, p->prenom, &(p->age));
    
    return p;
}

/*
Exercice 1.4 : Ecrire une fonction Adresse* lireAdresse(void) 
               qui retourne un pointeur vers une Adresse dont les champs ont été saisis par l’utilisateur.
*/
Adresse* lireAdresse(){
    Adresse* a = (Adresse*)malloc(sizeof(Adresse));
    a->voie = (char*) malloc(255*sizeof(char));
    a->ville = (char*) malloc(255*sizeof(char));
    
    printf("Saisir une adresse (numero rue code ville): ");
    
    scanf("%hd %s %d %s", &(a->numero), a->voie, &(a->code), a->ville);
    
    return a;
}


int main()
{
    Personne* p = lirePersonne();
    printf("%s, %s - %hd\n", p->nom, p->prenom, p->age);

    Adresse* a = lireAdresse();
    printf("%hd %s %d %s\n", a->numero, a->voie, a->code, a->ville);

    return 0;
}
